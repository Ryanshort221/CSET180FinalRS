create database cset180final;
use cset180final;

create table users (
	user_id int primary key auto_increment,
	username varchar(255) unique not null,
    first_name varchar(255) not null,
    last_name varchar(255) not null,
    email varchar(255) unique not null,
	password varchar(255) not null,
    user_type enum('admin', 'vendor', 'customer') not null
);

create table products(
	product_id int primary key auto_increment,
    vendor_id int not null,
    category varchar(255) not null,
    title varchar(255) not null,
    description varchar(255) not null,
    foreign key(vendor_id) references users(user_id)
);

create table product_variants (
	variant_id int primary key auto_increment,
    product_id int not null,
    price decimal(10,2),
    discounted_price decimal(10,2) default null,
    discount_over_date date default null,
    product_img varchar(10000) not null,
    color varchar(255) not null,
    size varchar(255) not null,
    inventory int not null,
    stock_status enum('in stock', 'out of stock') not null,
    foreign key (product_id) references products(product_id)    
);

create table cart(
	user_id int not null,
    variant_id int not null,
    quantity int not null,
    foreign key(user_id) references users(user_id),
    foreign key(variant_id) references product_variants(variant_id)
);

select * from users;
select * from products;
select * from product_variants;
select * from cart;