{% extends "base.html" %}
{% block body %}
<main>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <h2>{{ message }}</h2>
        {% endfor %}
    {% endif %}
    {% endwith %}
    <div class="shipping_container">
        <form method="POST" action="" class="shipping_checkout_form">
        <h1>Shipping</h1>
        <label for="name">Name</label>
        <input type="text" id="name" name="name" value="" required>
        <label for="address">Address</label>
        <input type="text" id="street_address" name="street_address" value="" required>
        <label for="city">City</label>
        <input type="text" id="city" name="city" value="" required>
        <label for="state">State</label>
        <input type="text" id="state" name="state" value="" required>
        <label for="zip_code">Zip Code</label>
        <input type="text" id="zip_code" name="zip_code" value="" required>
        <label for="phone">Phone Number</label>
        <input type="tel" id="phone_number" name="phone_number" value="" required>
        <label for="country">Country</label>
        <input type="text" id="country" name="country" value="" required>
        <label for="is_default">Make default shipping address</label>
        <select name="is_default" id="">
            <option value="Yes">Yes</option>
            <option value="No">No</option>
        </select>
        <input type="submit" value="Continue">
    </form>
    </div>
    <div class="order_summary">
        <h1>Order Summary</h1>
        <div class="order_summary_container">
            {% for c in cart %}
            <div class="order_summary_item">
                <h5 class="order_summary_title">Title: {{c.title}} </h5>
                <p class="order_summary_text">Product ID: {{c.product_id}} </p>
                <p class="order_summary_text">Color: {{c.color}}</p>
                <p class="order_summary_text">Size: {{c.size}}</p>
                {% if c.discounted_price is not none and c.discounted_price > 0 %}
                <p class="order_summary_text order_summary_price">Price: {{c.discounted_price*c.quantity}}</p>
                {% else %}
                <p class="order_summary_text order_summary_price">Price: {{c.price*c.quantity}}</p>
                {% endif %}
                <p class="order_summary_text">Quantity: {{c.quantity}}</p>
                {% endfor %}
            </div>
                <p class="total"></p>
        </div>
    </div>
</main>
<script>
    total = 0;
    prices = document.getElementsByClassName("order_summary_price");
    for (var i = 0; i < prices.length; i++) {
        total += parseFloat(prices[i].innerHTML.split(": ")[1]);
    }
    // document.getElementsByClassName("total")[0].value += total.toFixed(2);
    document.getElementsByClassName("total")[0].innerHTML += "Total: $ " + total.toFixed(2);
</script>
{% endblock %}